<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>THE EMPIRE â€” Commander Login</title>

  <!-- Theme -->
  <link rel="stylesheet" href="/assets/css/empire-style.css" />

  <!-- Auth module (single source of truth) -->
  <script src="/assets/js/empire-auth.js" defer></script>

  <style>
    /* compact page shell */
    :root{ --card:#121a2b; --muted:#96a0b5; --txt:#e7ecf7; --accent:#ffd166; }
    body{ margin:0; min-height:100vh; display:grid; place-items:center; }
    .wrap{ width:min(560px,92vw); background:var(--card); border:1px solid rgba(255,255,255,.06);
           border-radius:16px; padding:22px 18px; box-shadow:0 24px 60px -24px rgba(0,0,0,.55); }
    h1{ margin:6px 0 8px }
    .muted{ color:var(--muted) }
    label{ display:block; margin:12px 0 6px }
    input{ width:100%; padding:12px 14px; border-radius:10px; background:#0c111a; border:1px solid #2a3350; color:var(--txt); }
    .row{ display:flex; gap:12px; margin-top:14px; align-items:center; justify-content:center; flex-wrap:wrap; }
    .btn{ background:var(--accent); color:#1a1a1a; padding:12px 18px; border-radius:12px; border:0; font-weight:800; cursor:pointer; }
    .link{ color:#9fd3f7; text-decoration:none }
    .msg{ display:none; margin-top:10px; padding:10px 12px; border-radius:10px; background:#2a1414; border:1px solid #7a3431; color:#ffd7d5; }
  </style>
</head>
<body class="bg-empire-hero">

  <main class="wrap">
    <div style="text-align:center;margin-bottom:8px">
      <img src="/app/assets/brand/commander_badge.png" alt="Supreme Command" width="72" height="72" loading="eager">
    </div>

    <h1>Commander Login</h1>
    <p class="muted">Enter your email or phone. A valid invite or clearance is required.</p>

    <div id="emp-msg" class="msg"></div>

    <label for="emp-id">Email or Phone</label>
    <input id="emp-id" type="text" placeholder="you@example.com or +234..." autocomplete="email">

    <div class="row">
      <button id="emp-enter" class="btn">Enter The Empire</button>
      <a class="link" href="/welcome.html">Back to Welcome</a>
    </div>

    <p class="muted" style="margin-top:10px;text-align:center">By entering you agree to Empire terms.</p>
  </main>

  <script>
  // Handle login after auth script loads
  window.addEventListener("DOMContentLoaded", () => {
    const btn = document.getElementById("emp-enter");
    const msg = document.getElementById("emp-msg");
    btn?.addEventListener("click", async () => {
      msg.style.display = "none";
      const id = (document.getElementById("emp-id")?.value || "").trim();
      try{
        await EmpireAuth.login(id);
        location.href = "/dashboard.html";
      }catch(e){
        msg.textContent = "Access denied: unauthorized";
        msg.style.display = "block";
      }
    });
  });
  </script>
</body>
</html>