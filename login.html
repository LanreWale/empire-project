<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>The Empire â€” Commander Login</title>
  <style>
    :root{ --bg:#0b0e12; --panel:#121826; --text:#e8eaed; --muted:#b6b9c2; --gold:#f1c40f; }
    *{box-sizing:border-box;margin:0;padding:0}
    body{background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;min-height:100vh;display:grid;place-items:center}
    .card{
      width:min(92vw,460px); background:var(--panel);
      border:1px solid rgba(255,255,255,.06); border-radius:24px;
      padding:28px; text-align:center; box-shadow:0 30px 60px -30px rgba(0,0,0,.5);
    }
    .logo{display:block;margin:6px auto 14px;width:220px;max-width:70vw}
    h1{font-size:clamp(22px,3.8vw,28px);margin:6px 0 18px;font-weight:800;letter-spacing:.3px}
    .field{margin:12px 0}
    .field input{
      width:100%; padding:14px 16px; border-radius:14px;
      border:1px solid rgba(255,255,255,.08); background:#0f131d; color:var(--text);
      font-size:1rem; outline:none;
    }
    .btn{
      width:100%; margin-top:10px; border:0; border-radius:14px;
      background:var(--gold); color:#1a1200; font-weight:800;
      padding:14px 22px; cursor:pointer; box-shadow:0 14px 34px -16px var(--gold);
    }
    .terms{margin-top:12px;color:var(--muted);font-size:.9rem}
  </style>
</head>
<body>
  <section class="card">
    <img class="logo" src="/assets/brand/empire-logo.png" alt="The Empire">
    <h1>Commander Login</h1>

    <form id="empire-login-form" autocomplete="on">
      <div class="field">
        <input id="login-id" type="text" placeholder="Email or Phone" autocomplete="username" />
      </div>
      <div class="field">
        <input id="accessKey" type="password" placeholder="Access Key" autocomplete="current-password" />
      </div>
      <button class="btn" type="submit">Enter The Empire</button>
    </form>

    <p class="terms">By entering you agree to Empire terms.</p>
  </section>

  <script src="/js/empire-auth.js"></script>
  <script>
    // If already logged in, jump straight to dashboard
    if (window.EmpireAuth?.has()) {
      location.replace("/dashboard.html");
    } else {
      const form = document.getElementById("empire-login-form");
      form?.addEventListener("submit", (e) => {
        e.preventDefault();
        const id  = (document.getElementById("login-id")?.value || "").trim();
        const key = (document.getElementById("accessKey")?.value || "").trim();
        if (!id || !key) { alert("Enter your ID and access key."); return; }

        // Placeholder: accept any non-empty values and create a local token
        const token = `OK:${id}:${Date.now()}`;
        window.EmpireAuth.set(token);
        location.href = "/dashboard.html";
      });
    }
  </script>
</body>
</html>