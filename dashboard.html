<!-- File: dashboard.html -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>THE EMPIRE â€” Supreme Command</title>

<style>
:root{
  --emp-bg-1:#0b1020; --emp-bg-2:#081225; --emp-sheen:#0d1b3a;
  --emp-card:rgba(16,21,32,.88); --emp-border:rgba(255,255,255,.06);
  --text:#e8eaed; --muted:#9db2d7; --gold:#f1c40f; --gold-2:#d9a100;
  --mint:#59ffa5; --ink:#0c111a; --ring:rgba(241,196,15,.25); --border:#1d2432;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  background:
    radial-gradient(1200px 600px at 10% 90%, rgba(21,40,82,.35), transparent 60%),
    radial-gradient(900px 500px at 85% 15%, rgba(27,60,120,.28), transparent 55%),
    linear-gradient(180deg, var(--emp-bg-2) 0%, var(--emp-bg-1) 100%);
  min-height:100svh;
}

/* Layout */
.layout{display:grid;grid-template-columns:260px 1fr;min-height:100svh}
.sidebar{
  background:linear-gradient(180deg,#0a0f1c,#0b1220 70%);
  border-right:1px solid var(--emp-border);padding:14px 12px 18px;
}
.brand{display:flex;align-items:center;gap:10px;padding:8px 8px 14px;margin-bottom:8px;
  border-bottom:1px dashed rgba(255,255,255,.08);}
.brand .crest{width:36px;height:36px;border-radius:10px;display:grid;place-items:center;
  background:linear-gradient(180deg,#1b2a4a,#101a31);}
.brand .title{font-weight:900;letter-spacing:.08em}
.brand .title span{color:#a5b4fc}
.nav a{display:block;padding:11px 12px;margin:8px 0;border-radius:12px;text-decoration:none;
  color:var(--text);background:var(--ink);border:1px solid var(--emp-border);
  font-weight:700;letter-spacing:.02em;}
.nav a.active{background:#172036;border-color:#2a3350}
.content{padding:20px}

/* Sections */
.section{margin:0 0 22px}
.section h2{font-size:1.05rem;letter-spacing:.08em;text-transform:uppercase;color:#cbd5e1;
  margin:0 0 10px;display:flex;align-items:center;gap:8px}
.badge{display:inline-block;padding:4px 8px;border-radius:999px;font-size:.75rem;
  background:#0d1526;border:1px solid var(--emp-border)}
.right{margin-left:auto}
.card{background:var(--emp-card);border:1px solid var(--emp-border);border-radius:16px;padding:16px}
.grid{display:grid;gap:14px}
.grid.kpi-4{grid-template-columns:repeat(4,minmax(180px,1fr))}
.hidden{display:none!important}
.kpi .lbl{color:var(--muted);font-weight:800}
.kpi .val{font-size:1.7rem;font-weight:900;color:var(--mint);}
</style>

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>

<!-- Hard-coded GAS API -->
<script>
const EMP_API = "https://script.google.com/macros/s/AKfycbysJmVXlrOE1_J3uw5wMqs9cnKtj-uuoxj0Mmj8JWTj7eZMvp9XJYXrs-0leocNXI6w/exec";
</script>
</head>
<body>
<div class="layout">
  <aside class="sidebar">
    <div class="brand">
      <div class="crest"><svg width="22" height="22" viewBox="0 0 24 24" fill="none">
        <path d="M12 2L3 7l9 5l9-5-9-5z" fill="#59ffa5"/>
        <path d="M3 7v6l9 5 9-5V7l-9 5-9-5z" fill="#ffd166" opacity=".3"/>
      </svg></div>
      <div class="title">THE <span>EMPIRE</span></div>
    </div>
    <nav class="nav" id="nav">
      <a data-view="overview" class="active">Dashboard</a>
      <a data-view="cpa">CPA Accounts</a>
      <a data-view="users">Users</a>
      <a data-view="analytics">Analytics</a>
      <a data-view="wallet">Payments / Wallet</a>
      <a data-view="security">Security</a>
      <a data-view="monitoring">Monitoring</a>
    </nav>
  </aside>

  <main class="content">
    <section id="view-overview" class="section">
      <h2>Supreme Command Dashboard <span class="badge">LIVE</span><span class="right muted" id="ov-updated"></span></h2>
      <div class="grid kpi-4">
        <div class="card kpi"><div class="lbl">Total Earnings</div><div class="val" id="ov-earn">$0</div></div>
        <div class="card kpi"><div class="lbl">Active Users</div><div class="val" id="ov-active">0</div></div>
        <div class="card kpi"><div class="lbl">Conversion Rate</div><div class="val" id="ov-cr">0%</div></div>
        <div class="card kpi"><div class="lbl">Total Clicks</div><div class="val" id="ov-clicks">0</div></div>
      </div>
    </section>
    <section id="view-cpa" class="section hidden"><h2>CPA Accounts</h2></section>
    <section id="view-users" class="section hidden"><h2>Users</h2></section>
    <section id="view-analytics" class="section hidden"><h2>Analytics</h2></section>
    <section id="view-wallet" class="section hidden"><h2>Wallet</h2></section>
    <section id="view-security" class="section hidden"><h2>Security</h2></section>
    <section id="view-monitoring" class="section hidden"><h2>Monitoring</h2></section>
  </main>
</div>

<script>
const $=s=>document.querySelector(s), $all=s=>Array.from(document.querySelectorAll(s));

function setActive(view){
  $all('.nav a').forEach(a=>a.classList.toggle('active',a.dataset.view===view));
  ['overview','cpa','users','analytics','wallet','security','monitoring']
    .forEach(v=>{
      const sec=$('#view-'+v);
      if(sec) sec.classList.toggle('hidden', v!==view);
    });
}

async function api(action){ const r=await fetch(EMP_API+"?action="+action); return r.json(); }
async function loadOverview(){
  const res=await api('overview');
  if(!res.ok) return;
  $('#ov-updated').textContent='Updated '+new Date(res.updatedAt||Date.now()).toLocaleString();
  $('#ov-earn').textContent='$'+(res.data?.totalEarnings||0);
  $('#ov-active').textContent=res.data?.activeUsers||0;
  $('#ov-cr').textContent=(res.data?.conversionRate||0)+'%';
  $('#ov-clicks').textContent=res.data?.totalClicks||0;
}

$all('.nav a').forEach(a=>{
  a.addEventListener('click',e=>{
    e.preventDefault();
    setActive(a.dataset.view);
    if(a.dataset.view==='overview') loadOverview();
  });
});

(async function init(){
  setActive('overview');
  await loadOverview();
})();
</script>
</body>
</html>